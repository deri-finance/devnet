(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[19],{1204:function(e,t,a){"use strict";var n=a(5),i=(a(61),a(1288)),c=a(49),s=a(23),l=a(15),o=a(6);const r=Object(c.a)(i.a)`
  width : ${e=>e.width}px;
`,d=c.a.div`
  width : ${e=>/px$/.test(e.width)?e.width:`${e.width}px`};
  height : ${e=>/px$/.test(e.height)?e.height:`${e.height}px`};
`;t.a=function(e){const[t,a]=Object(n.useState)(Object(o.jsx)("span",{className:"loading-line"})),[i,c]=Object(n.useState)(!0),b=()=>{const{allowZero:t}=e;return"object"!==typeof e.value&&void 0!==e.value&&""!==e.value&&!isNaN(e.value)&&"NaN"!==e.value||0===Math.abs(e.value)&&!0===t},u=e=>e&&e.replace(/\.$/,"");return Object(n.useEffect)((()=>{const{allowZero:t,wallet:n,closeShowLoadingEffectAfterLoaded:j,defaultValue:p="--",...h}=e;if(b())!t&&h.value&&/\d+\.0*[1-9]+/.test(h.value)&&0===+Object(l.bg)(h.value).toFixed(+h.decimalScale||2)&&(h.decimalScale=Object(s.d)(Math.abs(h.value))+2),h.value=Object(s.J)(h.value),h.value&&/\d+.9{6}/.test(h.value)&&(h.value=(+h.value).toFixed(5)),a(Object(o.jsx)(r,{...h,renderText:u,displayType:"text",fixedDecimalScale:!0,thousandSeparator:!0}));else if(i){const{width:t,height:n}=e;a(Object(o.jsx)(d,{className:"loading-line",width:t,height:n})),j&&c(!1)}const x=window.setTimeout((()=>{b()||a(p)}),6e4);return()=>{clearTimeout(x)}}),[e.value,e.decimalScale,e.suffix]),t}},1219:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n,i=a(55),c=a(49),s=a(1378),l=a.n(s),o=a(144),r=a(23),d=a(1379),b=a(6),u=c.a.div(n||(n=Object(i.a)(["\n  display:",";\n  .text {\n    border-bottom : 1px dashed #93A1B8;\n    width : max-content;\n    cursor : pointer;\n    display:","\n  }\n  \n  .__react_component_tooltip.tooltip.show {\n    font-weight : "," \n  }\n"])),(function(e){return e.block}),(function(e){return e.block}),(function(e){return e.isWin?400:600}));function j(e){var t=e.text,a=e.id,n=void 0===a?String((new Date).getTime())+Math.random():a,i=e.tip,c=e.multiline,s=e.html,j=e.className,p=e.element,h=void 0===p?"":p,x=e.block,f=void 0===x?"block":x,v=e.width,m=void 0===v?"auto":v,O=e.children,g=e.tiggerEvent;return Object(b.jsxs)(u,{className:j,block:f,isWin:d.isWindows,children:[Object(b.jsx)("div",{className:"text","data-for":n,"data-tip":s?l.a.renderToString(h):i,"data-event":Object(r.y)()?"click":g,"data-html":s,children:t||O}),i&&Object(b.jsx)(o.a,{id:n,width:m,padding:"12",place:"bottom",overridePosition:function(e,t,a,n,i,c,s,l){var o=a.getBoundingClientRect(),r=n.getBoundingClientRect(),d=o.x,b=o.y,u=o.height,j=o.width;e.left,e.top;return d+r.width/2>document.documentElement.clientWidth?d-=Math.abs(j-r.width):d-(r.width-j)/2<0?d-=j:d-=(r.width-j)/2,b+u+r.height>=document.documentElement.clientHeight?b=b+u-r.height:b+=u,d<0&&(d=0),b<0&&(b=0),{top:b,left:d}},html:s,borderRadius:8,multiline:c})]})}},1263:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n,i=a(8),c=a(55),s=a(5),l=a(170),o=a(49),r=a(6),d=o.a.div(n||(n=Object(c.a)(["\n    display : flex;\n    width: 100%;\n    justify-content: space-between;\n  "])));function b(e){var t=e.groups,a=void 0===t?["25%","50%","75%","100%"]:t,n=e.selectedBorderColor,c=e.defaultBorderColor,o=e.onChange,b=e.defaultValue,u=e.outline,j=e.outlineColor,p=e.width,h=e.height,x=e.bgColor,f=e.className,v=e.disabled,m=e.canUnselected,O=void 0===m||m,g=Object(s.useState)(b),y=Object(i.a)(g,2),k=y[0],w=y[1];return Object(s.useEffect)((function(){w(b)}),[b]),Object(r.jsx)(d,{className:f,children:a.map((function(e,t){return Object(r.jsx)(l.a,{label:e,selectedBorderColor:n,isSelected:e===k,disabled:v,outline:u,bgColor:x,className:"g-button",defaultBorderColor:c,outlineColor:j,width:p,height:h,onClick:function(){var t;(t=e)!==k?(w(t),o&&o(t)):O&&t===k?(w(""),o&&o("")):w(t)}},t)}))})}},1349:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,i=a(57),c=a(55),s=a(5),l=a(49),o=a(15),r=a(1219),d=a(6),b=l.a.div(n||(n=Object(c.a)(["\ndisplay : flex;\nfont-size : 14px;\nalign-items : center;\nbackground: rgba(85, 119, 253, 0.1);\nborder-radius: 4px;\njustify-content: space-between;\ninput {\n  background: transparent;\n  border-radius: 4px;\n  // min-width: 240px;\n  border: 0;\n  width : ",";\n  height: 56px;\n  color : #E0ECFF;\n  font-size : 18px;\n  padding-left: 16px;\n}\ninput:focus {\n  outline: none;\n}\n.unit {\n  margin-right: ",";\n}\n"])),(function(e){return e.inputWidth}),(function(e){return e.unitPadding}));function u(e){var t=e.value,a=e.unit,n=e.unitTip,c=e.max,l=e.step,u=e.onChange,j=e.styles,p=void 0===j?{}:j,h=e.focus,x=e.placeholder,f=void 0===x?"":x,v=e.unitPadding,m=void 0===v?"24px":v,O=e.minTradeVolume,g=e.decimal,y=void 0===g?2:g,k=e.readOnly,w=e.inputWidth,N=void 0===w?"50%":w,S=e.className,T=e.disabled,C=void 0!==T&&T,I=e.onBlur,_=e.onFocus,q=Object(s.useRef)(null);return Object(s.useEffect)((function(){q.current.setCustomValidity(""),q.current&&h&&q.current.focus()}),[h]),Object(d.jsxs)(b,{unitPadding:m,inputWidth:N,className:S,style:Object(i.a)({},p),children:[Object(d.jsx)("input",{placeholder:f,type:"number",onBlur:I,onFocus:_,disabled:C,value:t,step:l,ref:q,onChange:function(e){var t="\\d+\\.\\d{0,".concat(y,"}$"),a=new RegExp(t),n=e.target.value;if(c&&Object(o.bg)(n).gt(c))u&&u(c);else if(n<0||isNaN(n))u&&u("");else if(n){if(O>=1)if(n/O>=1)u&&u(Object(o.bg)(n).div(O).integerValue()*O);else u&&u(n*O);else if(/\d+\./.test(n)&&!a.test(n)){var i=n.substring(0,n.indexOf(".")+1+y);u&&u(i)}else u&&u(n)}else u&&u(n)},readOnly:k}),Object(d.jsx)("div",{className:"unit",children:n?Object(d.jsx)(r.a,{tip:n,text:a}):a})]})}},1350:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n,i=a(8),c=a(55),s=a(49),l=a(5),o=a(31),r=a(6),d=s.a.div(n||(n=Object(c.a)(["\n    cursor: pointer;\n    width:","px;\n    height:","px;\n    display:flex;\n    .tab-left.inactive{\n      border-radius:0px 0px 4px 0px;\n    }\n    .tab-right.inactive{\n      border-radius:0px 0px 0px 4px;\n    }\n    .tab-left.active{\n      border-radius:0px 4px 0px 0px;\n      ",";\n    }\n    .tab-right.active{\n      border-radius:4px 0px 0px 0px;\n      ",";\n    }\n    .inactive,.active{\n      width:50%;\n      box-sizing: content-box;\n      font-size:","px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      img{\n        margin-right:","px\n      }\n    }\n    .inactive{\n      background:",";\n      ","\n    }\n    .active {\n      color: ",";\n      background : ",";\n      ",";\n    }\n    .icon-tab{\n      margin-right:20px;\n      width:25px;\n      height:25px;\n    }\n  "])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.borderR}),(function(e){return e.borderL}),(function(e){return e.size}),(function(e){return e.iconMarginRight}),(function(e){return e.inactiveBgColor}),(function(e){return e.borderB}),(function(e){return e.activeFontColor}),(function(e){return e.activeBgColor}),(function(e){return e.borderT}));function b(e){var t=e.tabSet,a=e.inactiveBgColor,n=e.iconMarginRight,c=e.activeBgColor,s=(e.icon,e.className),b=e.width,u=void 0===b?238:b,j=e.height,p=void 0===j?47:j,h=e.size,x=void 0===h?16:h,f=e.borderTop,v=void 0!==f&&f,m=e.borderBottom,O=void 0!==m&&m,g=e.divider,y=void 0!==g&&g,k=Object.keys(t),w=Object(l.useState)(k[0]),N=Object(i.a)(w,2),S=N[0],T=N[1],C=Object(l.useState)(),I=Object(i.a)(C,2),_=I[0],q=I[1],E=Object(l.useState)(),L=Object(i.a)(E,2),B=L[0],F=L[1],A=Object(l.useState)(),D=Object(i.a)(A,2),R=D[0],P=D[1],z=Object(l.useState)(),$=Object(i.a)(z,2),W=$[0],Z=$[1],M=Object(l.useState)(),U=Object(i.a)(M,2),V=U[0],H=U[1],J=Object(l.useState)(),K=Object(i.a)(J,2),X=K[0],Y=K[1];return Object(l.useEffect)((function(){var e=Object.keys(t);T(e[0])}),[t]),Object(l.useEffect)((function(){var e=Object.keys(t),a=S||e[0];if(t[a]){q(t[a].style);var n=v?"border-top:1px solid ".concat(t[a].borderColor):"border-top:0",i=O?"border-bottom:1px solid ".concat(t[a].borderColor):"border-bottom:0",c=y?"border-left:1px solid ".concat(t[a].borderColor):"border-left:0",s=y?"border-right:1px solid ".concat(t[a].borderColor):"border-right:0",l=t[a].fontColor?t[a].fontColor:"#FFFFFF";F(n),P(c),Z(i),H(s),Y(l)}}),[t,S]),Object(r.jsxs)("div",{style:_,className:s,children:[Object(r.jsx)(d,{className:"tab-header",iconMarginRight:n,width:u,height:p,activeFontColor:X,activeBgColor:c,inactiveBgColor:a,size:x,borderT:B,borderB:W,borderL:R,borderR:V,children:k.map((function(e,a){return Object(r.jsxs)("div",{className:"".concat(t[e].direction,e===S?" active":" inactive"),onClick:function(t){return function(e,t){T(e)}(e)},children:[t[e].icon?Object(r.jsx)(o.a,{width:t[e].iconWidth,height:t[e].iconHeight,token:e===S?t[e].icon:t[e].inicon}):"","  ",e]},a)}))}),t[S]?t[S].content:""]})}},1406:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n,i=a(55),c=a(49),s=(a(5),a(6)),l=c.a.div(n||(n=Object(i.a)(["\nwidth:","%;\nmax-width:100%;\nheight:10px;\nbackground-color: #5577FD;\n"])),(function(e){return e.width}));function o(e){var t=e.startTimestamp,a=e.nowTimestamp,n=e.endTimestamp,i=parseInt((a-t)/(n-t)*100);return Object(s.jsx)("div",{className:"time-slider",children:Object(s.jsx)(l,{width:i})})}},1538:function(e,t,a){"use strict";t.a=a.p+"static/media/staked.45c27f0b.svg"},1539:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n,i=a(8),c=a(55),s=a(5),l=a(49),o=a(481),r=a(6),d=l.a.div(n||(n=Object(c.a)(["\n  .search-token{\n  width: ","px;\n  height: ","px;\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding:0 24px;\n  border-radius:4px;\n  img{\n    width:18px;\n    height:18px;\n  }\n  .search-input{\n    border: 0;\n    width:100%;\n    height: 100%;\n    background:transparent;\n    outline-style: none;\n    color: #FFFFFF;\n    font-size: 18px;\n    border-radius: 4px;\n  }\n}\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.bgColor}));function b(e){var t=e.list,a=e.onChange,n=e.width,c=void 0===n?"320":n,l=e.height,b=void 0===l?"48":l,u=e.bgColor,j=void 0===u?"rgba(85, 119, 253, 0.1)":u,p=e.searchName,h=void 0===p?"bTokenSymbol":p,x=e.className,f=Object(s.useState)(""),v=Object(i.a)(f,2),m=v[0],O=v[1],g=Object(s.useState)(0),y=Object(i.a)(g,2),k=(y[0],y[1]),w=Object(s.useRef)([]);return Object(s.useEffect)((function(){if(m){var e=m.toLocaleUpperCase();0===w.current.length&&(w.current=t,k(t.length));var n=w.current.filter((function(t){return t[h]&&t[h].indexOf(e)>=0}));a(n)}else a(w.current)}),[m]),Object(s.useEffect)((function(){0===w.current.length&&k(t.length)}),[t]),Object(r.jsx)(d,{width:c,height:b,bgColor:j,className:x,children:Object(r.jsxs)("div",{className:"search-token",children:[Object(r.jsx)("input",{type:"text",className:"search-input",placeholder:"Search",value:m,onChange:function(e){!function(e){var t=e.target.value;O(t)}(e)}}),Object(r.jsx)("img",{src:o.default,alt:""})]})})}},1618:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(0),i=a.n(n),c=a(2),s=a(8),l=a(5),o=a(170),r=a(1406),d=a(475),b=a(171),u=a(1204),j=a(34),p=a(23),h=(a(1619),a(6));function x(e){var t=e.lang,a=e.getLang,n=e.poolShow,x=void 0===n||n,f=e.wallet,v=void 0===f?{}:f,m=Object(l.useState)(""),O=Object(s.a)(m,2),g=O[0],y=O[1],k=Object(l.useState)(0),w=Object(s.a)(k,2),N=w[0],S=w[1],T=Object(b.c)(),C=Object(l.useState)(0),I=Object(s.a)(C,2),_=I[0],q=I[1],E=Object(l.useState)(0),L=Object(s.a)(E,2),B=L[0],F=L[1],A=Object(l.useState)({}),D=Object(s.a)(A,2),R=D[0],P=D[1],z=Object(l.useState)(!1),$=Object(s.a)(z,2),W=$[0],Z=$[1],M=Object(l.useState)(""),U=Object(s.a)(M,2),V=U[0],H=U[1],J=Object(d.a)(R.chainId);Object(l.useEffect)((function(){var e;return e=window.setInterval((function(){var e=28800,a=parseInt(Date.now()/1e3),n=parseInt(a/e)*e,i=n+e-a,c=parseInt(i/3600),s=parseInt(i%3600/60),l=parseInt(i%60);S(n),q(n+e),F(a),y("".concat(c," ").concat(t.h," ").concat(s," ").concat(t.m," ").concat(l," ").concat(t.s))}),1e3),function(){e&&clearInterval(e)}}),[]);var K=function(){var e=Object(c.a)(i.a.mark((function e(){var t,a,n,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.isConnected()){e.next=10;break}return e.next=3,j.a.request("getUserInfoAll",[v.detail.account]);case 3:t=e.sent,a=(+t.total).toFixed(2),n=t.valid?(+t.amount).toFixed(2):0,c=t.lp,s=(+t.trade).toFixed(2),l=t.chainId,P({claimed:a,unclaimed:n,harvestDeriLp:c,harvestDeriTrade:s,chainId:l});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==J.name){e.next=3;break}return T.error("".concat(t["wrong-network"])),e.abrupt("return");case 3:if(Object(p.f)(v.detail.chainId,R.chainId)){e.next=6;break}return T.error("".concat(t["your-deri-is-on"]," ").concat(J.name," ").concat(t["connect-to"]," ").concat(J.name," ").concat(t["to-claim"])),e.abrupt("return");case 6:if(0!==+R.unclaimed){e.next=9;break}return T.error(t["no-deri-to-claim-yet"]),e.abrupt("return");case 9:if(!(parseInt(Date.now()/1e3)%28800<1800)){e.next=13;break}return T.error(t["claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch"]),e.abrupt("return");case 13:return e.next=15,j.a.request("mintDToken",[v.detail.chainId,v.detail.account],{includeResponse:!0});case 15:if(!e.sent.success){e.next=20;break}return e.abrupt("return",!0);case 20:return T.error(t["claim-failed"]),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.isConnected()){e.next=7;break}return e.next=3,X();case 3:e.sent&&Z(!0),e.next=17;break;case 7:return e.prev=7,e.next=10,v.connect();case 10:return t=e.sent,e.abrupt("return",!!t);case 14:return e.prev=14,e.t0=e.catch(7),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}(),G=function(e){var a;switch(e){case 1:a=t.jan;break;case 2:a=t.feb;break;case 3:a=t.mar;break;case 4:a=t.apr;break;case 5:a=t.may;break;case 6:a=t.jun;break;case 7:a=t.jul;break;case 8:a=t.aug;break;case 9:a=t.sep;break;case 10:a=t.oct;break;case 11:a=t.nov;break;case 12:a=t.dec}return a},Q=function(){var e=Object(c.a)(i.a.mark((function e(){var t,a,n,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.isConnected()){e.next=5;break}return e.next=3,j.a.request("getUserFirstClaimInfo",[v.detail.account]);case 3:(t=e.sent).first_timestamp?(a=new Date(1e3*t.first_timestamp),n=a.getFullYear(),c=a.getMonth()+1,c=G(c),s=a.getDate(),H("".concat(c," ").concat(s,", ").concat(n))):H("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){var e=window.setInterval(K,18e4);return K(),Q(),function(){return clearInterval(e)}}),[v.detail.account]),Object(h.jsx)("div",{className:"mining-claim",children:Object(h.jsxs)("div",{className:"mining-claim-info",children:[Object(h.jsxs)("div",{className:"deri-num-slider",children:[Object(h.jsxs)("div",{className:"deri-claim-time",children:[t["current-epoch-remaining-time"]," : ",g]}),R.harvestDeriLp>0&&Object(h.jsxs)("div",{className:"deri-claim-text",children:[t["your-harvest-in-current"]," ",Object(h.jsx)("span",{className:"deri-num",children:Object(h.jsx)(u.a,{value:R.harvestDeriLp,decimalScale:2,displayType:"text",di:!0,thousandSeparator:!0})}),"   $DERI."]}),x&&Object(h.jsxs)("div",{className:"deri-claim-text",children:[a("claim-deri",{num:W?0:R.unclaimed?R.unclaimed:0}),V&&Object(h.jsxs)("span",{children:[" ",a("claim-deri-history",{date:V,num:W?+R.unclaimed+ +R.claimed:R.claimed})," . ",t.woohoo]})]}),Object(h.jsx)("div",{className:"deri-claim-slider",children:Object(h.jsx)(r.a,{startTimestamp:N,nowTimestamp:B,endTimestamp:_})})]}),x&&Object(h.jsx)("div",{className:"cliam-button",children:Object(h.jsx)(o.a,{icon:"ClaimDeri",fontWeight:"bold",label:t["claim-all"],onClick:Y})})]})})}},1619:function(e,t,a){},1626:function(e,t,a){},1627:function(e,t,a){},1628:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,i=a(8),c=a(55),s=a(5),l=(a(34),a(49)),o=a(31),r=a(1219),d=a(6),b=l.a.div(n||(n=Object(c.a)(["\n  .remove-hint{\n    cursor: pointer;\n    .text{\n      display: flex;\n      border:0;\n    }\n    span{\n      margin-left:8px;\n    }\n  }\n"])));function u(e){var t=e.lang,a=e.baseToken,n=e.penalty,c=e.isB0Staked,l=e.availableBalance,u=e.getLang,j=Object(s.useState)(""),p=Object(i.a)(j,2),h=p[0],x=p[1];return Object(s.useEffect)((function(){var e,i={num:a};e=c?"BUSD"===a?"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(n," BUSD ").concat(t["this-action-will-update-your"]):"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(n," BUSD ").concat(u("this-action-will-trigger-swapping-to-update-your",i)):"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(n," BUSD ").concat(u("this-action-will-trigger-swapping-to-update-your-busd-balance-to-reflect-the-unsettled-amount",i)),x(e)}),[c,n,a]),Object(d.jsx)(b,{children:+n<0&&+l>0&&Object(d.jsx)("div",{className:"remove-hint",children:Object(d.jsxs)(r.a,{tip:h,width:"332",children:[Object(d.jsx)(o.a,{token:"warn"})," ",Object(d.jsx)("span",{children:t["negative-unsettled-balance"]})]})})})}},1698:function(e,t,a){"use strict";var n=a(5),i=a(170),c=a(46),s=a(84),l=a(34),o=a(15),r=a(23),d=(a(1626),a(6));function b(){return Object(d.jsx)("div",{class:"sleepContentView",children:Object(d.jsx)("div",{class:"circle"})})}var u=a(31);a(1627);t.a=Object(c.b)("wallet")(Object(c.c)((function({lang:e,wallet:t,pool:a={},bTokenId:c,bToken:j,icon:p,label:h,onClick:x,isReady:f,disabled:v=!0,statusCallback:m,alert:O,...g}){const[y,k]=Object(n.useState)(!0),[w,N]=Object(n.useState)(h),[S,T]=Object(n.useState)(!1),[C,I]=Object(n.useState)(!1),[_,q]=Object(n.useState)(!1),[E,L]=Object(n.useState)(!1),[B,F]=Object(n.useState)(p),A=Object(n.useCallback)((async(e,t)=>{let a;if(e.detail&&t.address)if(s.a.isOpen&&await o.openConfigListCache.update(),Object(r.x)(t.address))a=await l.a.request("isLpUnlocked",[e.detail.chainId,t.address,e.detail.account]);else{const n=[e.detail.chainId,t.address,e.detail.account,j||c];a=await l.a.request("isUnlocked",n)}return a}),[j,c]),D=Object(n.useCallback)((async()=>{if(t&&a){let e;if(s.a.isOpen&&await o.openConfigListCache.update(),Object(r.x)(a.address))e=await l.a.request("unlockLp",[t.detail.chainId,a.address,t.detail.account]);else{let n=[t.detail.chainId,a.address,t.detail.account,j||c];e=await l.a.request("unlock",n)}return e}}),[a,t,c,j]);return Object(n.useEffect)((async()=>{a&&t.detail&&t.detail.account&&a.bTokens&&e&&(t.isConnected()?await A(t,a)?(T(!1),N(h),F(p),m&&m(!1)):(T(!0),F(p),m&&m(!0)):(N(e["connect-wallet"]),F(null)))}),[a,t,e,j]),Object(n.useEffect)((()=>{k(v)}),[v]),Object(n.useEffect)((()=>{t&&a&&a.address&&(t.setAddress(a.address),a.isV3||a.isV3Lite?t.setBToken(j):t.setBTokenId(c))}),[t,a,c,j]),Object(d.jsxs)("div",{children:[Object(d.jsx)(i.a,{...g,disabled:!y,label:w,onClick:async()=>{if(a&&t&&t.detail){if(L(!0),t.isConnected()){if(await A(t,a))return F(p),x();{F(p);let e=await D();if(e){I(!0),await x()&&q(!0),m&&m(!1)}else L(!1),O&&O.error("Approve failed"),m&&m(!0);return e}}return F(null),t.connect()}},icon:B}),S&&Object(d.jsxs)("div",{className:"init-approve",children:[Object(d.jsxs)("div",{className:"step-approve",children:[!E&&Object(d.jsx)("div",{className:"step-one",children:"1"}),E&&Object(d.jsx)("div",{className:"pending",children:C?Object(d.jsx)(u.a,{token:"finish"}):Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:C?"approve-text finish-text":"approve-text",children:e.approve})]}),Object(d.jsx)("div",{className:C?"step-hr finish":"step-hr"}),Object(d.jsxs)("div",{className:"step-transaction",children:[!C&&Object(d.jsx)("div",{className:"step-two",children:"2"}),E&&C&&Object(d.jsx)("div",{className:"pending",children:_?Object(d.jsx)(u.a,{token:"finish"}):Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:_?"transaction-text finish-text":"transaction-text",children:w})]})]})]})})))},2102:function(e,t,a){},2103:function(e,t,a){},2412:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a(50),c=a(119),s=a(46),l=a(1618),o=a(1349),r=a(1698),d=a(1263),b=a(23),u=a(1204),j=a(18),p=a(34),h=a(171),x=(a(2102),a(15)),f=a(1628),v=a(6);function m({getLang:e,wallet:t,lang:a,type:i,isLp:c,bTokenId:s,poolConfig:l,version:m,baseToken:O,address:g,walletBalance:y,poolInfo:k,afterTransaction:w}){const[N,S]=Object(n.useState)(""),[T,C]=Object(n.useState)(!1),[I,_]=Object(n.useState)(""),[q,E]=Object(n.useState)(!1),[L,B]=Object(n.useState)(""),[F,A]=Object(n.useState)(!1),D=Object(h.c)(),[R,P]=Object(n.useState)({}),z="add"===i||"v2"===m||"v3"===m||"v3_lite"===m?O:a.shares;return Object(n.useEffect)((()=>{const e=Object(x.bg)(y),a=Object(x.bg)(N);N&&0!==+N&&!a.gt(e)?((async()=>{let e,a="add"===i?N:Object(x.bg)(N).times(Object(x.bg)(-1)).toString();e="v3"===m||"v3_lite"===m?[t.detail.chainId,g,t.detail.account,a,O]:[t.detail.chainId,g,t.detail.account,a,s];const n=await p.a.request("getEstimatedLiquidityInfo",e);P(n)})(),E(!0)):E(!1)}),[N]),Object(n.useEffect)((()=>{S(""),_("")}),[i,s,O]),Object(n.useEffect)((()=>{t.isConnected()&&(async()=>{if(O){let e=await p.a.request("getEstimatedLpInfo",[t.detail.chainId,g,t.detail.account,O]);B(e.b0Penalty),A(e.isB0Staked)}})()}),[t.detail,O,g]),Object(v.jsxs)("div",{className:"operate",children:[Object(v.jsx)("div",{className:"add-input",children:Object(v.jsx)(o.a,{value:N,unit:z,onChange:e=>{S(e)},inputWidth:"237px",styles:{"min-width":"332px"}})}),"add"===i&&Object(v.jsxs)("div",{className:"wallet-balance",children:[a["wallet-balance"]," ",Object(v.jsx)(u.a,{value:y,displayType:"text",decimalScale:2})," ",O]}),"remove"===i&&Object(v.jsxs)("div",{className:"wallet-balance",children:[a["staked-balance"]," ",Object(v.jsx)(u.a,{value:k.totalShares,displayType:"text",decimalScale:2})," ",z]}),"remove"===i&&Object(v.jsx)("div",{children:Object(v.jsx)(f.a,{getLang:e,lang:a,baseToken:O,penalty:L,isB0Staked:F})}),Object(v.jsx)("div",{className:"check-proportion",children:Object(v.jsx)(d.a,{outline:!0,defaultValue:I,onChange:e=>{let t="add"===i?y:k.totalShares,a=Object(b.D)(e,t);_(e),S(a),_(e),C("100%"===e)},bgColor:" rgba(85, 119, 253, 0.1)",width:77,height:40})}),Object(v.jsx)("div",{className:"information",children:N&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"percentage",children:[Object(v.jsx)("div",{className:"info-box-title",children:a["my-liquidity-percentage"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,width:"80px",value:k.percent,decimalScale:2,suffix:"%"})," ->  ",Object(v.jsx)(u.a,{width:"80px",allowZero:!0,value:100*R.percentage1,decimalScale:2,suffix:"%"})]})]}),Object(v.jsxs)("div",{className:"staked-balance",children:[Object(v.jsx)("div",{className:"info-box-title",children:a["staked-balance"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{width:"80px",allowZero:!0,value:k.formatShares,decimalScale:2})," -> ",Object(v.jsx)(u.a,{width:"80px",allowZero:!0,value:R.shares1,decimalScale:2}),"v2"===m||"v3"===m||"v3_lite"===m?" "+O:" "+a.shares]})]})]})}),Object(v.jsxs)("div",{className:"add-remove-btn",children:["add"===i&&Object(v.jsx)(r.a,{alert:D,disabled:q,fontWeight:"bold",onClick:async()=>{const e=Object(x.bg)(y);if(Object(x.bg)(N).gt(e))return D.error(a["not-sufficient-funds"]),!1;if(N<=0||isNaN(N))return D.error(a["it-has-to-be-greater-than-zero"]),!1;let n;if("lp"===c){let e=[t.detail.chainId,g,t.detail.account,N];n=await p.a.request("addLpLiquidity",e,{includeResponse:!0})}else{let e;e="v3"===m||"v3_lite"===m?[t.detail.chainId,g,t.detail.account,N,O]:[t.detail.chainId,g,t.detail.account,N,s],n=await p.a.request("addLiquidity",e,{includeResponse:!0})}return w(!0),S(""),n&&n.success?(D.success(a["add-success"]),!0):(D.error(a["failure-of-transaction"]),!1)},bToken:O,pool:l,wallet:t,bTokenId:s,fontSize:"18",type:j.k,width:"331",label:a["add-liquidity"],lang:a}),"remove"===i&&Object(v.jsx)(r.a,{alert:D,disabled:q,fontWeight:"bold",onClick:async()=>{const e=Object(x.bg)(k.totalShares);let n;n=T?k.totalShares:N;const i=Object(x.bg)(n);if(i.gt(e))return D.error(`${a["your-current-max-removable-shares-are"]}  ${k.totalShares}`),!1;if(+n<=0||isNaN(N))return D.error(a["invalid-liquidity"]),!1;let l;if("lp"===c){let e=[t.detail.chainId,g,t.detail.account,n];l=await p.a.request("removeLpLiquidity",e,{includeResponse:!0})}else{let a;a="v3"===m||"v3_lite"===m?[t.detail.chainId,g,t.detail.account,n,O,e.eq(i)]:[t.detail.chainId,g,t.detail.account,n,s,e.eq(i)],l=await p.a.request("removeLiquidity",a,{includeResponse:!0})}return l&&l.success?D.success(a["remove-success"]):D.error(a["failure-of-transaction"]),S(""),w(),!0},bToken:O,pool:l,type:j.k,wallet:t,bTokenId:s,fontSize:"18",width:"331",label:a["remove-liquidity"],lang:a})]})]})}var O=a(1350),g=a(101),y=a(475),k=(a(2103),a.p+"static/media/back.b0297594.svg"),w=a(474),N=a(476),S=a(473),T=a(1538),C=a(477),I=a(0),_=a.n(I),q=a(2),E=a(8),L=a(1219),B=a(297),F=a(170),A=g[x.DeriEnv.get()].chainInfo;function D(e){var t=e.wallet,a=e.chainId,i=e.nowApy,c=e.poolInfo,s=e.address,l=e.nowToken,o=e.lang,r=e.version,d=e.type,j=e.poolConfig,x=e.symbols,f=Object(n.useState)("show"),m=Object(E.a)(f,2),O=m[0],g=m[1],y=Object(n.useState)(),k=Object(E.a)(y,2),w=k[0],N=k[1],S=Object(h.c)(),T=function(){var e=Object(q.a)(_.a.mark((function e(){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=6;break}return e.next=3,j.getVenusEarned(t,s);case 3:a=e.sent,N(a=+a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(q.a)(_.a.mark((function e(){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.request("claimXVSLp",[t.detail.chainId,s,t.detail.account],{includeResponse:!0});case 2:(a=e.sent)&&a.success?S.success(o["collect-success"]):S.error(o["failure-of-transaction"]),T();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(t.isConnected()&&("v3"===r||"v3_lite"===r)){var e;return T(),e=window.setInterval((function(){T()}),18e4),function(){e&&clearInterval(e)}}}),[t,t.detail,j]),Object(v.jsxs)("div",{className:"pool-info",children:[Object(v.jsxs)("div",{className:"pool-info-title",children:[Object(v.jsx)("div",{className:"pool-info-title-text",children:o["pool-info"]}),Object(v.jsxs)("div",{className:"down-up",children:["show"===O&&Object(v.jsx)("span",{onClick:function(){return g("hide")},children:Object(v.jsx)("img",{className:"up-icon",alt:"",src:B.default})}),"hide"===O&&Object(v.jsx)("span",{onClick:function(){return g("show")},children:Object(v.jsx)("img",{alt:"",src:B.default})})]})]}),Object(v.jsxs)("div",{className:"'pool-info-text' ".concat(O),children:[Object(v.jsxs)("div",{className:"pool-info-text-one",children:["v2_lite_open"!==r&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o.apy}),Object(v.jsxs)("div",{className:"info-box-num",children:["v3"!==r&&"v3_lite"!==r&&Object(v.jsx)(u.a,{value:c.apy,displayType:"text",decimalScale:2,suffix:"%"}),("v3"===r||"v3_lite"===r)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(L.a,{text:Object(v.jsx)(u.a,{width:"50px",value:i.apy,displayType:"text",decimalScale:2,suffix:"%"}),tip:o["deri-apy"]}),"\xa0 +  \xa0  ",Object(v.jsx)(L.a,{text:Object(v.jsx)(u.a,{width:"50px",value:i.supplyApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:o["venus-suppy-apy"]}),"  \xa0 +  \xa0",Object(v.jsx)(L.a,{text:Object(v.jsx)(u.a,{width:"50px",value:i.xvsApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:o["xvs-distribution-apy"]})]})]})]}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["pool-liquidity"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{value:c.total,displayType:"text",decimalScale:2,thousandSeparator:!0})," ","v3"===r||"v3_lite"===r?"BUSD":l]})]}),("v2"===r||"v3"===r||"v3_lite"===r)&&!("option"===d&&"v2"===r)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o.multiplier}),Object(v.jsx)("div",{className:"info-box-num",children:c.multiplier})]}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["my-liquidity-percentage"]}),Object(v.jsx)("div",{className:"info-box-num",children:Object(v.jsx)(u.a,{allowZero:!0,value:c.percent,decimalScale:2,suffix:"%"})})]}),("v2"!==r&&"v3"!==r&&"v3_lite"!==r||"v2"===r&&"option"===d)&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["liquidity-share-value"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,decimalScale:6,value:c.shareValue,thousandSeparator:!0})," ",l]})]})}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["staked-balance"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,value:c.formatShares,decimalScale:2}),"v2"!==r&&"v3"!==r&&"v3_lite"!==r||"option"===d&&"v2"===r?" "+o.shares:" "+l]})]}),("v2"!==r&&"v3"!==r&&"v3_lite"!==r||"v2"===r&&"option"===d)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title"}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,decimalScale:2,value:c.values,thousandSeparator:!0})," ",l]})]}),("v2"===r||"v3"===r||"v3_lite"===r)&&!("option"===d&&"v2"===r)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:Object(v.jsx)(L.a,{multiline:!0,text:o["mining-pnl"],tip:o["mining-pnl-tip"]})}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,prefix:" ",value:c.swappedPnl,decimalScale:2})," ",l]})]}),("v3"===r||"v3_lite"===r)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["xvs-earned"]}),Object(v.jsxs)("div",{className:"info-box-num collect-box",children:[Object(v.jsx)(u.a,{value:w,decimalScale:2}),Object(v.jsx)(F.a,{onClick:C,className:"collect",label:o.collect})]})]})]}),Object(v.jsxs)("div",{className:"pool-info-text-two",children:["lp"!==d&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o.symbols}),Object(v.jsx)("div",{className:"info-box-num symbols",children:"main"===j.zone?x:Object(v.jsx)(L.a,{tip:x,children:x})})]}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["contract-address"]}),Object(v.jsx)("div",{className:"info-box-num",children:Object(v.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(A[a]&&A[a].viewUrl,"/address/").concat(s),children:Object(b.i)(s)})})]})]})]})]})}var R=a(31),P=a(1539);function z(e){var t=e.lang,a=e.address,i=e.checkoutBaseToken,c=e.nowToken,s=e.bTokenList,l=e.version,o=e.type,r=Object(n.useState)([]),d=Object(E.a)(r,2),j=d[0],p=d[1],h=function(e){e.target.src=C.default};return Object(n.useEffect)((function(){p(s)}),[s]),Object(v.jsxs)("div",{className:"select-basetoken-info",children:[Object(v.jsxs)("div",{className:"select-coin-title-search",children:[Object(v.jsxs)("div",{className:"select-coin-title",children:[" ",t["select-the-coin"]]}),Object(v.jsx)("div",{className:"search-box",children:Object(v.jsx)(P.a,{list:s,searchName:"bTokenSymbol",onChange:function(e){return p(e)}})})]}),Object(v.jsxs)("div",{className:"coin-search",children:[Object(v.jsx)("div",{className:"slide-icon left",children:Object(v.jsx)(R.a,{token:"arrow-left",width:"24",height:"24"})}),Object(v.jsxs)("div",{className:"v3"===l||"v3_lite"===l?"coin-list some-coin":"coin-list",children:["lp"!==o&&"v2_lite_open"!==l&&Object(v.jsx)(v.Fragment,{children:j.map((function(e,a){return Object(v.jsxs)("div",{className:c===e.bTokenSymbol?"coin-box checked-base":"coin-box",onClick:function(){i(e.bTokenId,e.bTokenSymbol)},children:[Object(v.jsxs)("div",{className:"base-apy-info",children:[Object(v.jsx)("div",{className:"btoken-logo ".concat(e.bTokenSymbol)}),Object(v.jsxs)("div",{className:"apy-base-staked",children:[Object(v.jsx)("div",{className:"base-name",children:e.bTokenSymbol}),Object(v.jsxs)("div",{className:"base-apy",children:[t.apy," \xa0 ",Object(v.jsx)(u.a,{width:"50px",value:e.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),("v3"===l||"v3_lite"===l)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("span",{children:[" +  ",Object(v.jsx)(u.a,{width:"50px",value:e.supplyApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),"  + "]}),Object(v.jsx)(u.a,{width:"50px",value:e.xvsApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]})]})]})]}),e.staked&&Object(v.jsx)("img",{src:T.a,alt:""})]})}))}),"v2_lite_open"===l&&Object(v.jsx)(v.Fragment,{children:j.map((function(e,a){return Object(v.jsxs)("div",{className:"coin-box checked-base",onClick:function(){i(e.bTokenId)},children:[Object(v.jsxs)("div",{className:"base-apy-info",children:[Object(v.jsx)("div",{className:"btoken-logo ".concat(e.bTokenSymbol),children:Object(v.jsx)("img",{alt:"",onError:h,src:"https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/".concat(e.bTokenSymbol,".png")})}),Object(v.jsx)("div",{className:"apy-base-staked",children:Object(v.jsx)("div",{className:"base-name",children:e.bTokenSymbol})})]}),e.staked&&Object(v.jsxs)("div",{className:"stake",children:[Object(v.jsx)("img",{src:T.a,alt:""}),t.staked]})]})}))}),"lp"===o&&s.length&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"coin-box checked-base",children:Object(v.jsxs)("div",{className:"base-apy-info",children:[Object(v.jsxs)("div",{className:"lp-btoken-logo",children:[Object(v.jsx)("div",{className:"btoken-logo ".concat(s[0].bTokenSymbol)}),Object(v.jsx)("span",{className:"conect-logo",children:"+"}),Object(v.jsx)("div",{className:"btoken-logo ".concat(s[1].bTokenSymbol)})]}),Object(v.jsxs)("div",{className:"apy-base-staked",children:[Object(v.jsx)("div",{className:"base-name",children:c}),Object(v.jsxs)("div",{className:"base-apy",children:[Object(b.v)(a)&&Object(v.jsxs)(v.Fragment,{children:[t.apy," \xa0 ",Object(v.jsx)(u.a,{value:s[1].apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]}),Object(b.B)(a)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(L.a,{text:"".concat(t.apy," ").concat((+s[1].apy).toFixed(2)," %"),tip:t["deri-apy"]}),"\xa0 + \xa0 ",Object(v.jsx)(L.a,{text:"".concat(t.apy,"  ").concat((+s[1].lpApy).toFixed(2)," %"),tip:t["sushi-apy"]})]})]})]})]})})})]}),Object(v.jsx)("div",{className:"slide-icon right",children:Object(v.jsx)(R.a,{token:"arrow-right",width:"24",height:"24"})})]})]})}const $=x.DeriEnv.get(),{chainInfo:W}=g[$];t.default=Object(s.b)("wallet","poolManager")(Object(s.c)((function({lang:e,wallet:t={},poolManager:a,getLang:s}){const{version:o,chainId:r,address:d,type:u}=Object(i.i)(),[j,h]=Object(n.useState)(),[f,g]=Object(n.useState)(""),[I,_]=Object(n.useState)(!1),[q,E]=Object(n.useState)(""),[L,B]=Object(n.useState)([]),[F,A]=Object(n.useState)({}),R=Object(y.a)(),[P,$]=Object(n.useState)(""),[Z,M]=Object(n.useState)(),[U,V]=Object(n.useState)({}),H=W[r]&&W[r].name,J=async()=>{if(t.isConnected()){let e=[t.detail.chainId,d,t.detail.account],a=null;q.isLp?a=await p.a.request("getLpWalletBalance",e):("v3"===o||"v3_lite"===o?e.push(j):e.push(f),"v2_lite_open"===o&&await x.openConfigListCache.update(),a=await p.a.request("getBTokenBalance",e)),M(a)}},K=()=>{J(),Y(),G()},X=Object(n.useMemo)((()=>({[e.add]:{content:Object(v.jsx)(m,{getLang:s,poolConfig:q,isLp:u,wallet:t,afterTransaction:K,version:o,bTokenId:f,address:d,lang:e,type:"add",poolInfo:F,baseToken:j,walletBalance:Z}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"add-icon",iconWidth:"25",iconHeight:"25",inicon:"inactive-add",direction:"tab-left"},[e.remove]:{content:Object(v.jsx)(m,{getLang:s,isLp:u,poolConfig:q,wallet:t,afterTransaction:K,lang:e,address:d,type:"remove",bTokenId:f,poolInfo:F,balance:F,baseToken:j,version:o}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"remove-icon",iconWidth:"25",iconHeight:"25",iconMarginRight:"20",inicon:"inactive-remove",direction:"tab-right"}})),[e,s,q,u,t,o,f,d,j,Z,F]),Y=async()=>{let e=null;if(q){let a,n,i,c,s,l,r=await q.getPoolInfo(t,q);if(r.bTokensApy&&r.bTokensLiq&&("v2"===o&&f?(s=r.bTokensApy.filter((e=>e.bTokenId===f)),a=s[0].apy,l=s[0].multiplier,c=r.bTokensLiq.filter((e=>e.bTokenId===f)),c=c[0].liquidity):"v2_lite_open"!==o&&"v3"!==o&&"v3_lite"!==o?(a=r.bTokensApy[0].apy,c=r.bTokensLiq[0].liquidity):"v3"!==o&&"v3_lite"!==o||(s=r.bTokensApy.filter((e=>e.bTokenSymbol===j)),s.length&&(a=s[0].apy,n=s[0].supplyApy,i=s[0].xvsApy,l=s[0].multiplier),c=r.bTokensLiq.filter((e=>e.bTokenSymbol===j)),c.length&&(c=c[0].liquidity)),e={total:c,apy:100*+a,supplyApy:100*+n,xvsApy:100*+i,multiplier:l}),t.isConnected()){e=await q.getLiquidityInfo(t,d,q.version,q.isLp,u,j,f),"v3"!==o&&"v3_lite"!==o||(e.supplyApy=100*+n,e.xvsApy=100*+i),e.apy=100*+a,e.multiplier=l}A(e)}},G=async()=>{if(t.isConnected()&&q){let e=await q.getIsStaked(t,q);if(e.bTokens){L.map((t=>{if("v2"===o&&"option"!==u)t.staked=e.bTokens.filter((e=>e.bTokenId===t.bTokenId))[0].isStaked;else if("v3"===o||"v3_lite"===o){let a=e.bTokens.filter((e=>e.bTokenSymbol===t.bTokenSymbol));t.staked=!!a.length&&a[0].isStaked}else t.staked=e.isStaked;return t}))}let a=[];if(L.forEach(((e,t)=>{if(e.staked)return a.push(e),void L.splice(t,1)})),L.unshift(...a),L.length){let e=L[0].bTokenSymbol;Object(b.v)(d)?e="PANCAKE-LP":Object(b.B)(d)&&(e="DERI-USDT SLP");let t=L[0].bTokenId;h(e),g(t)}}};return Object(n.useEffect)((()=>{t.detail.chainId&&t.detail.chainId!==r&&t.switchNetwork(R[r])}),[t.detail]),Object(n.useEffect)((()=>{(async()=>{await a.load();let e=a.pools;"lp"===u&&(await a.loadDoubleMingingPool(),e=a.lpPools),"v2_lite_open"===o&&(await a.loadOpen(),e=a.openPools),e=e.filter((e=>e.address===d)),e=e[0];let t=e.bTokens[0].bTokenSymbol;Object(b.v)(d)?t="PANCAKE-LP":Object(b.B)(d)&&(t="DERI-USDT SLP"),e.bTokens[0].bTokenId;let n=e.symbols.map((e=>{let t=[];return t.push(e.symbol),t}));n=n.join(","),$(n),E(e),B(e.bTokens)})()}),[]),Object(n.useEffect)((()=>{if(M(""),L.length&&(j||f)){let e,t={};if("v2"!==o){t=L.filter((e=>e.bTokenSymbol===j))[0]}else if("v2"===o){t=L.filter((e=>e.nowTokenId===f))[0]}V(t),"v2"===o&&"option"!==u?f&&(e=L.filter((e=>e.bTokenId===f))[0].staked):"lp"!==u&&(e=L.filter((e=>e.bTokenSymbol===j))[0].staked),_(e)}}),[L,j,f]),Object(n.useEffect)((()=>{(async()=>{if(q){let e=await q.getPoolInfo(t,q);e.bTokensApy&&L.map((t=>{if("v2"===o)t.apy=100*+e.bTokensApy.filter((e=>e.bTokenId===t.bTokenId))[0].apy;else if("v2_lite_open"!==o&&"v3"!==o&&"v3_lite"!==o)t.apy=100*+e.bTokensApy[0].apy,Object(b.B)(d)&&(t.lpApy=e.lpApy);else if("v3"===o||"v3_lite"===o){let a=e.bTokensApy.find((e=>e.bTokenSymbol===t.bTokenSymbol));a&&(t.apy=100*+a.apy,t.supplyApy=100*+a.supplyApy,t.xvsApy=100*+a.xvsApy)}return t}))}})()}),[q,L]),Object(n.useEffect)((()=>{Y(),J()}),[f,q,t.detail.account,j]),Object(n.useEffect)((()=>{G()}),[q,t.detail.account,L]),Object(v.jsxs)("div",{className:"pool-detail",children:[Object(v.jsx)("div",{className:"back-pool",children:Object(v.jsx)(c.b,{to:"0x08aD0E0b4458183758fC5b9b6D27c372965fB780"===d||"0x66f501dda450C8978c4A1115D7b2A7FAa7702F05"===d||"0x574022307e60bE1f07da6Ec1cB8fE23d426e5831"===d?"/retired":"/pool",children:Object(v.jsxs)("div",{className:"icon-back",children:[Object(v.jsx)("img",{alt:"",src:k}),Object(v.jsx)("span",{children:e.back})]})})}),Object(v.jsxs)("div",{className:"pool-deatail-info",children:[Object(v.jsxs)("div",{className:"pool-detail-basetoken-info",children:[Object(v.jsxs)("div",{className:"pool-info-text",children:[Object(v.jsxs)("div",{className:"pool-network-type",children:[Object(v.jsx)("div",{className:"network-logo",children:Object(v.jsx)("img",{alt:"",src:(e=>{let t,a=+e;return 56===a||97===a?t=w.default:137===a?t=N.default:1===a&&(t=S.default),t})(r)})}),Object(v.jsxs)("div",{className:"pool-type-network-text",children:[Object(v.jsxs)("div",{className:"pool-type-text",children:[e[q.type]," ",e[q.zone]]}),Object(v.jsx)("div",{className:"pool-network-text",children:H})]})]}),Object(v.jsxs)("div",{className:"pool-des",children:["lp"!==u&&e["amm-pool-des"],"clp"===o&&Object(v.jsx)(v.Fragment,{children:e["deri-pancake-pool"]}),"slp"===o&&Object(v.jsx)(v.Fragment,{children:e["deri-sushi-pool"]}),Object(v.jsx)("br",{}),"lp"!==u?Object(v.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-the-amm-liquidity-mining-on-deri-pools-risk-free",children:Object(v.jsxs)("span",{className:"learn-more",children:[" ",e["learn-more"]]})}):Object(v.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-dex-liquidity-mining-on-sushiswap-sushiswap-onsen-and-pancakeswap-deri-risk-free",children:Object(v.jsxs)("span",{className:"learn-more",children:[" ",e["learn-more"]]})})]})]}),Object(v.jsx)(z,{lang:e,address:d,checkoutBaseToken:async(e,t)=>{let a;a="v3"!==o&&"v3_lite"!==o?q.bTokens.filter((t=>t.bTokenId===e)):q.bTokens.filter((e=>e.bTokenSymbol===t)),A({}),g(e),M(""),h(a[0].bTokenSymbol),_()},nowToken:j,bTokenList:L,version:o,type:u})]}),Object(v.jsxs)("div",{className:"pool-detail-add-remove-info",children:[Object(v.jsxs)("div",{className:"mining-deri-liquidity",children:[Object(v.jsxs)("div",{className:"btoken-liquidity",children:["lp"!==u&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:`btoken-logo ${j}`,children:"v2_lite_open"===o&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("img",{alt:"",onError:e=>{e.target.src=C.default},src:`https://raw.githubusercontent.com/deri-io/deri-open-zone/main/img/${j}.png`})})}),Object(v.jsxs)("div",{className:"manage-stake",children:[Object(v.jsxs)("div",{className:"manage",children:[e.manage," ",j," ",e.liquidity]}),I&&Object(v.jsxs)("div",{className:"stake",children:[Object(v.jsx)("img",{src:T.a,alt:""}),e.staked]})]})]}),"lp"===u&&L.length&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"lp-btoken-logo",children:[Object(v.jsx)("div",{className:`btoken-logo ${L[0].bTokenSymbol}`}),Object(v.jsx)("span",{className:"conect-logo",children:"+"}),Object(v.jsx)("div",{className:`btoken-logo ${L[1].bTokenSymbol}`})]}),Object(v.jsxs)("div",{className:"manage-stake",children:[Object(v.jsxs)("div",{className:"manage",children:[e.manage," ",j," ",e.liquidity]}),I&&Object(v.jsxs)("div",{className:"stake",children:[Object(v.jsx)("img",{src:T.a,alt:""}),e.staked]})]})]})]}),Object(v.jsx)("div",{className:"deri-current-epoch",children:"v2_lite_open"!==o&&Object(v.jsx)(l.a,{poolShow:!1,lang:e,wallet:t})})]}),Object(v.jsxs)("div",{className:"mining-add-remove-liquidity",children:[Object(v.jsx)(D,{wallet:t,nowApy:U,poolInfo:F,chainId:r,address:d,nowToken:j,lang:e,poolInfo:F,version:o,type:u,poolConfig:q,symbols:P}),Object(v.jsx)("div",{className:"add-remove-liquidity",children:Object(v.jsx)(O.a,{tabSet:X,iconMarginRight:"20",width:379,size:18,inactiveBgColor:"#0c192d",icon:"",borderBottom:!0,divider:!0})})]})]})]})]})})))}}]);
//# sourceMappingURL=19.ea3ab04a.chunk.js.map